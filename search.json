[{"title":"一个用于天线仿真的小型超算系统","url":"/2018/03/22/一个天线仿真的超算系统/","content":"\n由于HFSS的版权特别的昂贵，软件的价格基本上是硬件价格的10倍以上，所以应该尽可能的最大化硬件的使用率。实验室近期在华为E9000服务器的基础上利用PBS Pro做调度器，用BeeGFS做文件管理系统，用Ansys HFSS自带的HPC组件创建了一套小型的HPC系统专门用于天线相关的仿真。\n\n整个机器由七个刀片服务器组成，所有的刀片服务器之间通过56G高速IB网络链接。其中有一个配置最低的结点使用Windows Server做多用户接入节点，配置Nvidia K40，16核心CPU，128G内存用于模型的编辑及数据前后处理，其余的六个刀片都由512G内存，1T硬盘，32核Xeon CPU组成，其中四个安装CentOS 7.3系统，通过PBS Pro配置成一个小型的集群，另外两个配置成Windows Server版本，通过HFSS Distribute功能专门看分配给多个用户使用,以支持小型项目的仿真。\n\nBeeGFS文件系统配置在Linux集群上，一共由20块1T的硬盘组成，并通过Samba挂载到Windows上，作为所有用户的工作目录。通过使用BeeGFS系统可以改善硬盘的负载，提高硬盘的使用寿命，并配合RAID的设置形成数据备份机制，保证重要的模型及仿真数据不发生丢失。\n\n总的来讲，整套系统中涉及模型的建立，编辑以及数据的前后处理都在windows Server系统中完成，大型项目的仿真全部提交到小型集群系统中完成，小型项目的仿真全部通过分布式计算完成。\n\n备注:在使用过程中发现由于涉及不同操作系统，以及不同软件组件之间的通信，提交作业的过程会稍微显得有延迟。\n","tags":["PBSPro"],"categories":["笔记，超算"]},{"title":"Ansys Electronics HFSS HPC设置中需要注意的几个小问题","url":"/2018/03/18/Ansys-Electronics-HFSS-HPC设置中需要注意的几个小问题/","content":"\nAnsys HFSS在配置集群的时候需要注意以下几个问题：\n1、运行于控制节点的ansoftrsmservice需要以非root用户运行，否则远程客户端使用默认的工具提交作业的时候会提示Permission Denied\n2、主节点上在运行ansoftrsmservioce程序之前要对ansoftrsmservice.cfg进行相关配置，这时一定要按照操作说明针对集群资源调度器的名称和路径给予正确的配置\n3、在启动ansoftrsmservice服务以后，要在Ansys的安装目录下使用RegisterEnginesWithRSM.pl add来添加配置信息到ansoftrsmservice.cfg中\n4、Linux主节点上放置模型的目录要保证也能同时被客户端访问\n5、注意集群服务器重新启动以后要检查集群的文件系统是否都挂载成功\n","tags":["集群， 高性能计算"]},{"title":"怎么学好用好并设计好天线呢？","url":"/2018/01/16/怎么学好用好并设计好天线呢？/","content":"\n**[这是我在知乎做的一个回答，大家将就看吧](https://www.zhihu.com/question/20777807/answer/144484542 \"原文\")**\n\n### 工程上天线是怎么设计出来的 ###\n\n一般来讲一个完整的天线设计过程会包括下面几个步骤：\n1、天线需求分析及分解\n在这个阶段你应该知道天线是在什么场景下使用的？在这种场景下客户要求的天线指标有哪些？客户提出的指标要求是否都合理，是否可实现？你可以适当牺牲哪些指标？哪些指标必须要保证？如果有不同客户提出不同的设计诉求，你有没有办法提取最关键的共同需求，实现归一化设计以降低设计成本？总之在这一个阶段你要做到你真的明白客户需要一个什么样的天线。\n\n2、天线解决方案分析\n等你理解清楚客户的需求以后，是时候提出具体的解决措施了。太阳底下没有新鲜事，这句话在天线设计领域也是成立的。天线的使用场景一定，你可选的天线方案一般也就定下来了。比如说：你要做低剖面的，那一般都会选择贴片类型的天线；你要做基站天线，那一般都会选择偶极子；你如果做测试馈源，那一般都会选择喇叭天线；你如果要做小型化，那你可能就会想到介质谐振天线。但这并不意味着万事大吉了。因为具体到某一个类型的天线，你要控制住天线的S参数带宽及方向图带宽都要求你对具体的天线形状做细致的设计和优化。在这一步中最能体现一个天线工程师的理论及仿真水平。一般来讲在这一步中会提出多种备选的方案，毕竟没有人会把所有的鸡蛋放在一个篮子里面。经过这一步，一般一个虚拟的但是完整的天线模型就产生了。\n\n3、天线样机制作\n在第二部的基础上，一般都会投版打样。在这一步你需要充分关注DFX：天线机械装配是否满足要求？能否做进一步的设计改进使得装配更加容易？是否已经做了防呆设计？天线的实际馈电设计是否和设想一样？能否进一步降低线路损耗？防雷设计是否到位？焊点可靠性设计是否OK等等。\n\n4、天线性能调试及天线定版\n你有了天线样机以后就需要做性能调试了。这里的调试一般就是一个try and cut的过程，但是好在我们有第二部做仿真及分析的基础，我们的try也就有一定的方向了。这里一般走弯路比较多，但是如果你前期的分析做的系统和有序，一般很快就能找到规律，所以对分析结果的整理一定得做到有序易回溯。千万不要认为天线是玄学，千万不要过多的吹捧经验的重要性，碰到疑难问题的时候，要学会冷静的分析问题的根因；你要坚信，宏观的电磁现象都能被经典的电动力学解释。（写完这几句脸有点烧，虽然心里默念千变，但是碰到问题，我也有抓瞎的时候）一般经过几个回合的调试，天线最终方案就会确定下来了。\n\n5、小批量试制及批量发货\n等天线定版以后，最关键的一部就来了。小批量试制及批量发货。经历了批量发货的人都会知道，在量产阶段什么神奇的问题都会发生，但是等你仔细分析的时候发生这些神奇的事情都是因为一些很细节的设计问题造成的，细节确实是魔鬼。举个真实的栗子：电镀锡的厚度本来和趋肤深度有关，这是一个关键指标，但是如果没有列为管控指标就很轻松的能造成天线批量问题。\n\n### 天线需要哪些理论支撑呢？ ###\n\n\n好了，等你清楚了天线设计的过程以后你就该知道你需要哪些知识了。\n\n首先你得懂天线相关的电学知识，这一部分知识不必贪多但一定得弄懂，电磁场理论就看R.F.Harrington的*Time-Harmonic Electromagnetic Fields*，天线就看C.A. Balanis的*Antenna Theory Analysis and Design*，有了这俩法器在手你一定不会被千奇百怪的天线形状给吓住的。PS:建议尝试做书后的习题，这对加深理解非常有帮助，虽然很多题目我都做不出来，捂脸～\n\n其次你得懂仿真工具及方法。天线设计中电磁仿真不是万能的但是没有电磁仿真却万万不能。我最熟练的工具是Ansys HFSS，就已这个为例了。要想用好仿真工具，你首先得会使用帮助文档。一个好的软件必定有非常完备的帮助文档，千万不要到处跪求各种问题的解法浪费时间（我就干过），静下心来仔细的阅读帮助文档，学会使用帮助文档，你想要知道的答案一般都会在的。例如要想理解HFSS的工作原理及各种技术细节，稍作探索你会发现HFSS的帮助文档中的Technical Notes部分就是你的最爱。怎么样才能算懂仿真工具及方法呢？用最简单的模型在最少的时间内用最合适的算法得到最优的结果，差不多就这个标准了。我一直这么要求自己，当然这个“最”也随着自己的阅历在不断的刷新着。\n\n再次你得知道结构设计及生产制造相关的知识。例如知道基本的绘图方法（现在才想起原来《工程制图》这么重要，以前在学校的时候我想我一个学电的学这为what？），什么样的造型设计有利于减小风载？什么样的结构形式能够增加强度？在现有的设计场景下应该优先使用什么样的材料来做天线？因为这些因素最终都会影响你设计的天线，你只有懂这些才能和其他领域的工程师愉快的合作。\n\n最后你得明白作为硬件工程师最好的自学方式就是找机会参加实际的生产实践。你得学会撸起袖子加油干，做一款能够工作的天线出来。我的体会是：我在公司一个月学会的东西比我在学校一年的都多～\n","tags":["学习天线"]},{"title":"在天线的世界里都有些什么呢？","url":"/2018/01/16/在天线的世界里都有些什么呢？/","content":"\n###### 天线是什么？ ######\n\n天线从不同的角度去考察就有不同的定义。一般来讲我们如果从场和路两个方面来认识天线会比较容易理解天线本身。从场的角度讲天线就是一个把传导受束缚的电磁波转换为脱离源在自由空间传播的电磁波的转换装置，反过来讲天线也能够把自由空间中传播的电磁波接受过来变成传导装置中受束缚的电磁波。从这个角度讲天线能够看做成是一个换能装置，也是一个空间滤波装置。\n\n\n如果我们从电路的角度去考察天线，天线就是一个广义电阻原件，他可以包括三个部分辐射电阻部分，吸收电阻部分和电抗部分。辐射电阻部分用来衡量天线在辐射或者吸收时的效率，吸收电阻部分用来衡量天线本身的热损耗带来的能量损失，另外辐射电抗部分用来衡量天线的匹配情况。\n\n\n实际工作中要同时考虑以上两点才能用好天线子系统。\n\n###### 实际工作中都有哪些天线呢？ ######\n\n天线分类起来可以一下几种（当然我会在后面的总结中一一进行分析起工作原理以及实际设计中的注意事项）：\n1. 环天线（等效磁偶极子天线）\n2. 电偶极子天线\n3. 微带天线\n4. 喇叭天线\n5. 介质谐振天线\n6. 反射面天线\n\n\n这些天线是一些基本的天线类型，只要弄清楚了这些天线的工作原理，然后再去理解其他的天线就没有什么太大的难处了。\n\n###### 天线阵列是个什么鬼？ ######\n\n通常来讲我们有了上面说的那些天线辐射单元以后可以应对很多的场景了。但是在实际工作中总是有很多的场合需要我们有更高的波束指向和旁瓣抑制，这时候单个单元就不能够解决问题，我们就需要使用天线阵列来达到我们的目的。天线阵列听着非常的玄幻，其实其数学本质可以看成是复数的加减运算。\n\n天线阵列按照其用途和形状可以分为很多不同的种类，常见的有线阵，平面矩形阵列，共形阵列等等。后续我会单独写一张关于阵列的内容。\n\n###### 天线的历史 ######\n\n任何一个学科知道其发展历史对我们的实际工作其实是很有帮助，关键的天线创新其产生的历史背景及背后的故事也是很让人着迷的，当然主要是能够满足我八卦的心。我会以天线发展过程中的关键节点来介绍一下我所知道的故事。\n\n###### 怎么学好用好并设计好天线呢？ ######\n\n作为一个有文化的天线工程师当然首先得学会看书呀！我会推荐几本天线相关的书籍并给出详细的理由。当然了学好理论只是保证你不瞎搞胡仿（抱歉这么说，我就这么干过，说给自己听的，读的人不要介意），实际要设计好天线还是要做很多其他的工作的。我会单独聊聊相关的一些看法，希望能帮到你。\n\n###### 我为什么要做这个事情呢？ ######\n\n主要是做了一段时间的天线以后发现，是应该好好回顾一下自己做个的天线，学过的理论和观点，挖过的坑，填过的坑，希望后来的同学能少受点罪，也当是对这几年自己工作的一个总结和提炼。\n\n另外，我看计算机的同学就很喜欢做总结，值得学习，并且老觉得他们做这些事情就很有意思，我也来凑凑热闹，就当是练习写作了。写的不好，请大家多多批评指导。如果你要是觉得写的好，帮到了你，要给我打赏个一块两块的，我一定不拦你。\n\n###### 关于我 ######\n\n我就一个一心想跨界，号称高级天线工程师，实际是天线农民工，菊花厂攻城狮一枚。\n","tags":["历史， 学习"]}]